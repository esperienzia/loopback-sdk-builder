/* tslint:disable */
import { Injectable } from '@angular/core';
import { HttpErrorResponse } from '@angular/common/http';
import { Observable, throwError } from 'rxjs';
/**
 * Default error handler
 */
@Injectable()
export class ErrorHandler {
  public handleError(errorResponse: HttpErrorResponse): Observable<never> {

    let err;
    if (errorResponse.error instanceof ArrayBuffer)
      err = String.fromCharCode.apply(null, new Uint8Array(errorResponse.error));

    errorResponse = new HttpErrorResponse({
       error: err ? err : errorResponse.error,
       headers: errorResponse.headers,
       status: errorResponse.status,
       statusText: errorResponse.statusText,
       url: errorResponse.url
    });

    try {
      if (errorResponse.error.error) {
        return throwError(errorResponse.error.error);
      } else {
        return throwError(JSON.parse(errorResponse.error).error);
      }
    } catch (e) {
      return throwError('Server error');
    }
  }
}
